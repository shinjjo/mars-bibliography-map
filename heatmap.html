 
<html>
  <head>
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.2.0/dist/leaflet.css">
    <script src="https://unpkg.com/leaflet@1.2.0/dist/leaflet.js"></script>
    <script src="https://code.jquery.com/jquery-2.1.1.min.js"></script> 
    <script src ="papaparse.min.js"></script>

    <style>
     #map {width: 100%; height: 100%}
   </style>
  </head>
  <body>
    <div id="map"></div>
    <script type = "text/javascript" src = "mapdata.geojson"></script>
    <script>
      var token = "pk.eyJ1Ijoic2hpbmpqbyIsImEiOiJjajlzaGZscTUwamlvM3VwZ2xvbHlvdnh2In0.FX5GpnQsst-vqywi0jIb1A";
      var map = L.map('map').setView([0, 0], 2.8);
        L.tileLayer('https://cartocdn-ashbu.global.ssl.fastly.net/nmanaud/api/v1/map/named/opm-mars-basemap-v0-1/all/{z}/{x}/{y}.png', {maxZoom: 18, attribution: '&copy; <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a>, &copy; <a href="https://carto.com/attribution">CARTO</a>'
      }).addTo(map);


    Papa.parse('https://shinjjo.github.io/paper.csv', {
      download: true,
      header: true,
      step: function(results) {
        var paper = L.geoJson(Mars, {
        onEachFeature: function(feature, layer) {
                var data = results.data;
                var popupText = "";
                var labelText = "";
                if (feature.properties && feature.properties.Clean_Feature_Name) {
                    popupText += "<b>" + feature.properties.Clean_Feature_Name.toString() + "</b>";
                    labelText = results.data.year;
                    var filtered = results.data.filter(function(data){return data.year == this;}, 
                        feature.properties.Feature_Type.toString());
                    popupText += "<br>" + JSON.stringify(filtered);
                    }
                if (feature.properties && feature.properties.year) {
                    popupText += "<br>" + feature.properties.year.toString();
                    }
                layer.bindPopup(popupText, labelText);
            } 
        }).addTo(map)
      }
      });
    </script>
  </body>
</html>
